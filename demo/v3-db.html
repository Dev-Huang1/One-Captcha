<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAPTCHA Demo</title>
    <script src="https://onecaptcha.us.kg/assets/api/v3-db/api2.js"></script>
</head>
<body>
    <div id="one-captcha" data-callback="CaptchaSuccess" error-callback="CaptchaError"></div>

    <script>
        function CaptchaSuccess(token) {
    // 获取名为 'OneCaptchaToken' 的 cookie 值
    function getTokenCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }

    // 获取 OneCaptchaToken 的 cookie
    const cookieToken = getTokenCookie('OneCaptchaToken');

    // 比较 token 和 cookieToken 是否相同
    if (token === cookieToken) {
        alert('Token matches the cookie!');
    } else {
        alert('Token does not match the cookie.');
    }
}


        function CaptchaError() {
            alert('Error');
        }
    </script>
</body>
</html>
